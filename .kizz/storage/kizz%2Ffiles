{"data":{"files":"[{\"path\":\"API/API.md\",\"absolutePath\":\"/home/zenozeng/home/code/kizz-doc/doc/API/API.md\",\"simhash\":[1,1,0,1,1,0,1,1,1,1,1,1,1,0,0,1,1,1,0,1,1,0,0,1,1,0,1,1,1,0,1,1,0,1,0,1,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,1,1,0,1,0,0,0,0,1,0,0,1,0,0,0,0,1,1,1,1,1,0,1,1,0,1,0,0,0,1,1,0,1,0,1,1,0,0,1,0,0,0,1,1,1,1,1,0,0,0,1,0,0,0,0,1,0,1,1,0,0,0,1,1,0,0,0,1,0,1,1,1,0,0,0,1,0],\"creationTime\":\"2014-09-04T14:00:13.021Z\",\"modificationTime\":\"2014-09-04T14:00:13.021Z\",\"content\":\"\\n<h2>This (Context)</h2>\\n<h3>load order</h3>\\n<ul>\\n<li><p>this.logger</p></li>\\n<li><p>this.config, this.storage</p></li>\\n<li><p>this.newFiles, this.changedFiles, this.unchangedFiles, this.removedFiles</p></li>\\n</ul>\\n<h3>this.logger</h3>\\n<pre><code class=\\\"language-javascript\\\">this.logger.trace('Entering cheese testing');\\nthis.logger.debug('Got cheese.');\\nthis.logger.info('Cheese is Gouda.');\\nthis.logger.warn('Cheese is quite smelly.');\\nthis.logger.error('Cheese is too ripe!');\\nthis.logger.fatal('Cheese was breeding ground for listeria.');\\n</code></pre>\\n<p>see also: https://github.com/nomiddlename/log4js-node</p>\\n<h3>this.storage</h3>\\n<pre><code class=\\\"language-javascript\\\">var str = this.storage.getItem('key');\\nthis.storage.setItem('key2', 'STRING');\\n</code></pre>\\n<h3>this.cache</h3>\\n<pre><code class=\\\"language-javascript\\\">var str = this.cache.getItem('key');\\nthis.cache.setItem('key2', 'STRING');\\n</code></pre>\\n<h3>this.newFiles</h3>\\n<pre><code class=\\\"language-javascript\\\">[\\n    {\\n        path: 'path of file A',\\n        modificationTime: 'YYYY-MM-DD H:mm:ss Z',\\n        creationTime: 'YYYY-MM-DD H:mm:ss Z'\\n    },\\n    {}\\n]\\n</code></pre>\\n<h3>this.changedFiles</h3>\\n<pre><code class=\\\"language-javascript\\\">[\\n    {\\n        path: 'path of file A',\\n        modificationTime: 'YYYY-MM-DD H:mm:ss Z',\\n        creationTime: 'YYYY-MM-DD H:mm:ss Z'\\n    },\\n    {}\\n]\\n</code></pre>\\n<h3>this.unchangedFiles</h3>\\n<pre><code class=\\\"language-javascript\\\">[\\n    {\\n        path: 'path of file A',\\n        modificationTime: 'YYYY-MM-DD H:mm:ss Z',\\n        creationTime: 'YYYY-MM-DD H:mm:ss Z',\\n        content: &quot;html&quot;, // by kizz-markdown\\n        title: &quot;title&quot;, // by kizz-markdown\\n        tags: [&quot;tag1&quot;, &quot;tag2&quot;] // front yaml or kizz-guess-tags\\n    },\\n    {}\\n]\\n</code></pre>\\n<h3>this.removedFiles</h3>\\n<pre><code class=\\\"language-javascript\\\">[\\n    {\\n        path: 'path of file A',\\n        modificationTime: 'YYYY-MM-DD H:mm:ss Z',\\n        creationTime: 'YYYY-MM-DD H:mm:ss Z',\\n        content: &quot;html&quot;, // by kizz-markdown\\n        title: &quot;title&quot;, // by kizz-markdown\\n        tags: [&quot;tag1&quot;, &quot;tag2&quot;] // front yaml or kizz-guess-tags\\n    },\\n    {}\\n]\\n</code></pre>\\n\",\"title\":\"Kizz API Documentation\",\"categories\":[\"API\"],\"tags\":[\"Kizz\",\"API\"]},{\"path\":\"API/middleware-guild.md\",\"absolutePath\":\"/home/zenozeng/home/code/kizz-doc/doc/API/middleware-guild.md\",\"simhash\":[1,0,1,1,1,0,1,1,1,1,1,1,1,0,0,0,1,1,0,1,1,0,0,1,0,1,1,0,0,0,1,1,0,1,0,1,0,1,0,1,0,0,1,0,1,1,0,1,1,0,0,1,1,0,1,0,0,0,0,1,1,0,1,1,0,1,0,1,1,1,1,1,1,0,1,0,0,0,0,0,0,1,0,1,0,1,1,1,0,1,0,0,0,0,0,1,1,0,0,1,0,0,0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,1,0,0,0,0,0,1,1,1,0,0],\"creationTime\":\"2014-09-04T13:59:30.715Z\",\"modificationTime\":\"2014-09-04T13:59:30.715Z\",\"content\":\"\\n<h2>create plugin</h2>\\n<pre><code class=\\\"language-bash\\\">mkdir kizz-helloworld\\ncd kizz-helloworld\\n</code></pre>\\n<h3>create package.json</h3>\\n<pre><code class=\\\"language-bash\\\">npm init\\n</code></pre>\\n<h3>create index.js</h3>\\n<pre><code class=\\\"language-bash\\\">gedit index.js\\n</code></pre>\\n<pre><code class=\\\"language-javascript\\\">module.exports = function(app) {\\n    app.when(function *() {\\n        return true;\\n    }).use(function *(next) {\\n        console.log(&quot;Hello World&quot;);\\n        yield next;\\n    });\\n}\\n</code></pre>\\n<h3>npm link</h3>\\n<pre><code class=\\\"language-bash\\\">cd myblog\\nmkdir -p node_modules # create node_modules if not exists\\nsudo npm link ~/code/kizz-helloworld/\\n</code></pre>\\n<h3>update config</h3>\\n<pre><code>plugins:\\n    - kizz-helloworld\\n</code></pre>\\n\",\"title\":\"Kizz Middleware Guide\",\"categories\":[\"API\"],\"tags\":[\"Kizz\",\"API\"]},{\"path\":\"API/storage.md\",\"absolutePath\":\"/home/zenozeng/home/code/kizz-doc/doc/API/storage.md\",\"simhash\":[1,1,1,1,1,0,0,0,0,1,0,0,0,1,0,0,1,1,0,0,0,1,1,1,0,1,0,1,1,1,1,0,1,0,0,1,1,1,0,1,0,0,0,1,1,1,0,0,1,1,0,0,1,0,0,0,1,1,0,1,1,0,0,1,0,1,1,0,1,0,1,1,0,0,1,1,0,1,0,1,1,0,0,1,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,1,0,1,1,0,1,1,1,0,1,0,0,0,0,0,1,0,1,1,1,0,0],\"creationTime\":\"2014-09-04T12:21:36.663Z\",\"modificationTime\":\"2014-09-05T06:46:45.140Z\",\"content\":\"\\n<p>Kizz uses <a href=\\\"https://github.com/zenozeng/version-storage\\\">VersionStorage</a> for Storage and Cache.</p>\\n<p>Storage are saved in <code>./.kizz/storage/</code> and Cache are saved in <code>./.kizz/cache/</code>.\\nStorage and Cache have same API, but Cache will be cleared when <code>kizz rebuild</code>.</p>\\n<h2>Usage</h2>\\n<h3>Storage</h3>\\n<pre><code class=\\\"language-javascript\\\">var upgrade = function(storage) {\\n    var oldVersion = storage.version;\\n    if(oldVersion &lt; 1) {\\n        // Version 1 is the first version of the database.\\n        storage.setItem('hello', '[1, 2, 3]');\\n    }\\n    if(oldVersion &lt; 2) {\\n        // Version 2 changes the data structure of `hello`\\n        var hello = storage.getItem('hello');\\n        // do some remaping\\n        storage.setItem('hello', newhello);\\n    }\\n    if(oldVersion &lt; 3) {\\n        // Version 3 changes the name of `hello`\\n        var hello = storage.getItem('hello');\\n        storage.removeItem('hello');\\n        storage.setItem('world', hello);\\n    }\\n    storage.setVersion(3);\\n};\\n\\nvar storage = new this.Storage('YOUR_UNIQUE_ID/DB_NAME', upgrade);\\nvar sth = storage.getItem('sth');\\nstorage.setItem('sth', 'STRING');\\nstorage.removeItem('sth');\\n</code></pre>\\n<h3>Cache</h3>\\n<p><strong>Note: Cache will be cleared when <code>kizz rebuild</code>.</strong></p>\\n<pre><code class=\\\"language-javascript\\\">var cache = new this.Cache('YOUR_UNIQUE_ID/DB_NAME', upgrade);\\nvar sth = cache.getItem('sth');\\ncache.setItem('sth', 'STRING');\\ncache.removeItem('sth');\\n</code></pre>\\n\",\"title\":\"Storage and Cache\",\"categories\":[\"API\"],\"tags\":[\"Kizz\",\"API\"]},{\"path\":\"API/theme-guide.md\",\"absolutePath\":\"/home/zenozeng/home/code/kizz-doc/doc/API/theme-guide.md\",\"simhash\":[1,0,1,0,0,0,0,0,0,0,0,0,1,0,0,1,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,0,0,0,0,1,1,1,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,1,0,0,0,1,0,0,1,0,0,0,0,0,0,1,0,0,0,1,1,0],\"creationTime\":\"2014-09-04T12:21:36.663Z\",\"modificationTime\":\"2014-09-04T12:21:36.663Z\",\"content\":\"\\n<p>Themes are just middlewares.</p>\\n\",\"title\":\"Kizz Theme Guide\",\"categories\":[\"API\"],\"tags\":[\"Kizz\",\"API\",\"theme\"]},{\"path\":\"Design/about-generator.md\",\"absolutePath\":\"/home/zenozeng/home/code/kizz-doc/doc/Design/about-generator.md\",\"simhash\":[1,1,1,0,0,1,0,1,1,0,1,0,0,0,0,1,0,0,1,0,0,0,0,1,0,1,0,1,0,0,0,1,0,0,0,0,0,1,1,1,0,0,0,1,1,0,1,1,0,1,1,1,0,0,0,0,0,0,1,1,0,0,1,1,0,1,1,0,1,1,1,0,1,1,1,1,0,0,0,0,1,1,0,1,0,0,1,1,0,0,1,0,1,0,1,0,1,1,1,0,1,0,1,1,0,0,0,1,0,0,0,0,1,1,0,0,0,0,1,0,1,1,1,0,1,1,0,1],\"creationTime\":\"2014-09-04T12:21:36.663Z\",\"modificationTime\":\"2014-09-08T04:25:40.854Z\",\"content\":\"\\n<p>Async, Promise, Generator 是 Javascript 三种语法。</p>\\n<p>虽然 generator 现在刚刚开始发展，但是我还是更加看好它，因为它很自然。</p>\\n<p>当然还是有 Async Functions 就是啦。\\n不过离 ES7 还远着呢，而且似乎社区现在也没有大量这方面的支持，\\n所以在很长的一段时间内 kizz 都会使用 generator。</p>\\n<p>Kizz 不介意破坏性改变，只要真的能够有所提升。</p>\\n<h2>跳出流程控制</h2>\\n<p>一个函数控制整个流程。\\n关于这个，当然用传统的方式也是可以做到的。\\n不过我是觉得看上去没有用 Generator 要来得自然就是了。</p>\\n<h3>callback version</h3>\\n<pre><code class=\\\"language-javascript\\\">app.use(context, next) {\\n    // do sth\\n    var afterNext = function() {\\n        // do sth later\\n    }\\n    next(context, afterNext);\\n}\\n</code></pre>\\n<h3>promise versioin</h3>\\n<pre><code class=\\\"language-javascript\\\">app.use(context, next) {\\n    // do sth\\n    // next take context &amp; generate a new promise\\n    next(context).then(function() {\\n        // do sth later\\n    });\\n}\\n</code></pre>\\n<h2>异步到同步的转变</h2>\\n<p><code>co</code> 这个库简化了异步的书写、提供了真正能用的 try catch 支持。</p>\\n<p>脱离了大量的 callback，代码就变得直白了起来。\\n（关于 Error Handle，NodeJS也提供了这个：http://nodejs.org/api/domain.html）</p>\\n<p>官方的例子：</p>\\n<pre><code class=\\\"language-javascript\\\">var co = require('co');\\nvar thunkify = require('thunkify');\\nvar request = require('request');\\nvar get = thunkify(request.get);\\n\\nco(function *(){\\n  var a = yield get('http://google.com');\\n  var b = yield get('http://yahoo.com');\\n  var c = yield get('http://cloudup.com');\\n  console.log(a[0].statusCode);\\n  console.log(b[0].statusCode);\\n  console.log(c[0].statusCode);\\n})()\\n\\nco(function *(){\\n  var a = get('http://google.com');\\n  var b = get('http://yahoo.com');\\n  var c = get('http://cloudup.com');\\n  var res = yield [a, b, c];\\n  console.log(res);\\n})()\\n\\n// Error handling\\n\\nco(function *(){\\n  try {\\n    var res = yield get('http://badhost.invalid');\\n    console.log(res);\\n  } catch(e) {\\n    console.log(e.code) // ENOTFOUND\\n }\\n})()\\n</code></pre>\\n\",\"title\":\"关于 Generator\",\"categories\":[\"Design\"],\"tags\":[\"Kizz\",\"API\",\"generator\",\"design\"]},{\"path\":\"Design/compile.md\",\"absolutePath\":\"/home/zenozeng/home/code/kizz-doc/doc/Design/compile.md\",\"simhash\":[0,0,1,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,1,0,0,1,0,1,0,1,1,1,1,0,1,0,1,0,1,1,0,1,1,0,1,1,1,1,0,0,1,1,1,0,0,0,0,1,1,0,1,0,1,0,0,1,0,0,1,1,0,1,1,1,0,0,1,0,0,1,1,1,0,1,0,0,1,1,0,0,1,0,1,0,1,0,1,0,0,1,0,1,0,1,1,1,1,0,0,1,1,1,1,0,0,0,1,1,1,0,0,1,0,1,1,0,0,0,0,1,1],\"creationTime\":\"2014-09-06T06:47:47.804Z\",\"modificationTime\":\"2014-09-08T04:25:40.854Z\",\"content\":\"\\n<p>为什么不把所有的东西都丢纯前端去做，而要有一个编译时？</p>\\n<p>有些事情，只能编译时做：</p>\\n<ul>\\n<li><p>记录文章的发布时间、修改时间</p>\\n<p>如果非要在运行时做这个，则只能手工指定，那与我的初衷不符。</p></li>\\n<li><p>SEO</p>\\n<p>虽然不是那么在乎这个，但是总是希望写的东西可以被需要的人检索到。</p></li>\\n<li><p>Feed (RSS/Atom)</p>\\n<p>纯前端很难做这个的</p></li>\\n<li><p>fs.readdir</p></li>\\n</ul>\\n\",\"title\":\"编译时？\",\"categories\":[\"Design\"],\"tags\":[\"design\"]},{\"path\":\"Getting Started/config.md\",\"absolutePath\":\"/home/zenozeng/home/code/kizz-doc/doc/Getting Started/config.md\",\"simhash\":[0,1,0,1,1,0,1,1,1,0,1,1,1,0,0,0,0,0,0,1,0,0,1,1,1,1,1,1,0,1,1,1,0,0,0,1,1,1,1,0,1,1,1,0,0,1,0,0,1,1,0,1,0,0,1,1,1,0,1,1,0,0,1,0,1,1,0,1,1,1,1,0,0,1,0,0,1,0,0,0,0,1,1,1,0,1,0,0,0,1,0,0,1,0,0,1,1,0,1,1,0,0,0,1,0,0,1,1,1,1,1,1,0,1,0,0,0,0,1,0,0,1,0,0,1,1,1,1],\"creationTime\":\"2014-09-15T06:07:33.328Z\",\"modificationTime\":\"2014-09-15T06:07:33.328Z\",\"content\":\"\\n<h2>comments</h2>\\n<h3>config/disqus.html</h3>\\n<pre><code class=\\\"language-html\\\"> &lt;div id=&quot;disqus_thread&quot;&gt;&lt;/div&gt;\\n    &lt;script type=&quot;text/javascript&quot;&gt;\\n        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */\\n        var disqus_shortname = 'kizzjs'; // required: replace example with your forum shortname\\n\\n        /* * * DON'T EDIT BELOW THIS LINE * * */\\n        (function() {\\n            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;\\n            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';\\n            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);\\n        })();\\n    &lt;/script&gt;\\n    &lt;noscript&gt;Please enable JavaScript to view the &lt;a href=&quot;http://disqus.com/?ref_noscript&quot;&gt;comments powered by Disqus.&lt;/a&gt;&lt;/noscript&gt;\\n    &lt;a href=&quot;http://disqus.com&quot; class=&quot;dsq-brlink&quot;&gt;comments powered by &lt;span class=&quot;logo-disqus&quot;&gt;Disqus&lt;/span&gt;&lt;/a&gt;\\n</code></pre>\\n<pre><code class=\\\"language-javascript\\\">var path = require('path'),\\n    fs = require('co-fs');\\n\\nmodule.exports = function(app) {\\n    app.use(function *(next) {\\n\\n        var ctx = this;\\n\\n        this.config = {\\n            site: {\\n                name: &quot;Kizz Documentation&quot;,\\n                description: &quot;The official documentation for Kizz.&quot;,\\n                url: &quot;http://kizz.zenozeng.com/&quot;\\n            },\\n            // global tags\\n            tags: [\\n                &quot;Kizz&quot;,\\n                &quot;API&quot;,\\n                &quot;generator&quot;,\\n                &quot;develop&quot;,\\n                &quot;design&quot;,\\n                &quot;theme&quot;\\n            ],\\n            source: &quot;doc&quot;, // defaults to source/\\n            target: path.join(ctx.cwd, &quot;public&quot;), // target dir\\n            comments: yield fs.readFile(path.join(__dirname, 'disqus.html'), {encoding: 'UTF-8'})\\n        };\\n\\n        yield next;\\n    });\\n};\\n</code></pre>\\n\",\"title\":\"Kizz Config Example\",\"categories\":[\"Getting Started\"],\"tags\":[\"Kizz\",\"API\",\"generator\",\"develop\",\"design\",\"theme\"]},{\"path\":\"Themes/paper.md\",\"absolutePath\":\"/home/zenozeng/home/code/kizz-doc/doc/Themes/paper.md\",\"simhash\":[0,0,0,0,0,0,1,1,1,1,0,1,0,1,0,0,0,1,0,1,1,0,1,0,1,1,0,0,1,1,1,0,1,0,1,0,1,0,0,1,1,1,0,1,1,0,1,0,1,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,1,1,1,1,1,1,1,0,1,0,0,1,1,1,1,0,0,1,0,0,0,0,0,0,1,0,1,0,0,1,1,0,1,1,0,1,0,0,1,0,1,0,0,1,1,1,0,0,0,0,1,1,1,1,1,1,0,1,1,0,1,0,1,1],\"creationTime\":\"2014-09-04T12:21:36.663Z\",\"modificationTime\":\"2014-09-08T04:25:40.854Z\",\"content\":\"\\n<p>Default theme for Kizz</p>\\n\",\"title\":\"Kizz Theme Paper\",\"link\":\"https://github.com/kizzjs/kizz-theme-paper\",\"categories\":[\"Themes\"],\"tags\":[\"Kizz\",\"theme\"]},{\"path\":\"images/logo.png\",\"absolutePath\":\"/home/zenozeng/home/code/kizz-doc/doc/images/logo.png\",\"simhash\":[1,1,1,0,1,0,0,0,0,0,1,1,1,0,0,1,1,0,0,0,0,1,1,0,1,1,1,1,1,0,1,1,1,1,0,1,1,1,1,1,1,0,0,1,0,1,1,0,1,0,0,0,1,1,0,0,1,1,1,0,1,0,0,1,0,0,1,1,1,1,0,0,0,1,0,0,1,1,0,0,1,1,1,0,1,1,0,0,1,1,1,0,0,1,1,1,1,1,0,1,1,1,1,1,1,0,0,1,0,1,0,0,1,1,0,1,1,1,0,1,1,0,0,1,1,0,1,0],\"creationTime\":\"2014-09-04T12:21:36.663Z\",\"modificationTime\":\"2014-09-04T12:21:36.663Z\",\"categories\":[\"images\"]}]"},"version":3}