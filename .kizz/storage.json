{"files":"[{\"path\":\"design/about-generator.md\",\"absolutePath\":\"/home/zenozeng/home/code/kizz-doc/doc/design/about-generator.md\",\"simhash\":[1,1,1,0,0,1,0,1,1,0,1,0,0,0,0,1,0,0,1,0,0,0,0,1,0,1,0,1,0,0,0,1,0,0,0,0,0,1,1,1,0,0,0,1,1,0,1,1,0,1,1,1,0,0,0,0,0,0,1,1,0,0,1,1,0,1,1,0,1,1,1,0,1,1,1,1,0,0,0,0,1,1,0,1,0,0,1,1,0,0,1,0,1,0,1,0,1,1,1,0,1,0,1,1,0,0,0,1,0,0,0,0,1,1,0,0,0,0,1,0,1,1,1,0,1,1,0,1],\"creationTime\":\"2014-08-29 17:35:24 +08:00\",\"modificationTime\":\"2014-08-30 22:30:36 +08:00\",\"content\":\"<h1 id=\\\"-generator\\\">关于 Generator</h1>\\n<p>Async, Promise, Generator 是 Javascript 三种语法。</p>\\n<p>虽然 generator 现在刚刚开始发展，但是我还是更加看好它，因为它很自然。</p>\\n<p>当然还是有 Async Functions 就是啦。\\n不过离 ES7 还远着呢，而且似乎社区现在也没有大量这方面的支持，\\n所以在很长的一段时间内 kizz 都会使用 generator。</p>\\n<p>Kizz 不介意破坏性改变，只要真的能够有所提升。</p>\\n<h2 id=\\\"-\\\">跳出流程控制</h2>\\n<p>一个函数控制整个流程。\\n关于这个，当然用传统的方式也是可以做到的。\\n不过我是觉得看上去没有用 Generator 要来得自然就是了。</p>\\n<h3 id=\\\"callback-version\\\">callback version</h3>\\n<pre><code class=\\\"lang-javascript\\\">app.use(context, next) {\\n    // do sth\\n    var afterNext = function() {\\n        // do sth later\\n    }\\n    next(context, afterNext);\\n}\\n</code></pre>\\n<h3 id=\\\"promise-versioin\\\">promise versioin</h3>\\n<pre><code class=\\\"lang-javascript\\\">app.use(context, next) {\\n    // do sth\\n    // next take context &amp; generate a new promise\\n    next(context).then(function() {\\n        // do sth later\\n    });\\n}\\n</code></pre>\\n<h2 id=\\\"-\\\">异步到同步的转变</h2>\\n<p><code>co</code> 这个库简化了异步的书写、提供了真正能用的 try catch 支持。</p>\\n<p>脱离了大量的 callback，代码就变得直白了起来。\\n（关于 Error Handle，NodeJS也提供了这个：<a href=\\\"http://nodejs.org/api/domain.html）\\\">http://nodejs.org/api/domain.html）</a></p>\\n<p>官方的例子：</p>\\n<pre><code class=\\\"lang-javascript\\\">var co = require(&#39;co&#39;);\\nvar thunkify = require(&#39;thunkify&#39;);\\nvar request = require(&#39;request&#39;);\\nvar get = thunkify(request.get);\\n\\nco(function *(){\\n  var a = yield get(&#39;http://google.com&#39;);\\n  var b = yield get(&#39;http://yahoo.com&#39;);\\n  var c = yield get(&#39;http://cloudup.com&#39;);\\n  console.log(a[0].statusCode);\\n  console.log(b[0].statusCode);\\n  console.log(c[0].statusCode);\\n})()\\n\\nco(function *(){\\n  var a = get(&#39;http://google.com&#39;);\\n  var b = get(&#39;http://yahoo.com&#39;);\\n  var c = get(&#39;http://cloudup.com&#39;);\\n  var res = yield [a, b, c];\\n  console.log(res);\\n})()\\n\\n// Error handling\\n\\nco(function *(){\\n  try {\\n    var res = yield get(&#39;http://badhost.invalid&#39;);\\n    console.log(res);\\n  } catch(e) {\\n    console.log(e.code) // ENOTFOUND\\n }\\n})()\\n</code></pre>\\n\",\"title\":\"关于 Generator\",\"tags\":[\"kizz\",\"api\",\"generator\"]},{\"path\":\"design/test/hex.md\",\"absolutePath\":\"/home/zenozeng/home/code/kizz-doc/doc/design/test/hex.md\",\"simhash\":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],\"creationTime\":\"2014-08-30 22:18:27 +08:00\",\"modificationTime\":\"2014-08-30 22:30:36 +08:00\",\"content\":\"\",\"title\":\"hex\",\"tags\":[]},{\"path\":\"developer/API.md\",\"absolutePath\":\"/home/zenozeng/home/code/kizz-doc/doc/developer/API.md\",\"simhash\":[1,1,0,1,1,0,1,1,1,1,1,1,1,0,0,1,1,1,0,1,1,0,0,1,1,0,1,1,1,0,1,1,0,1,0,1,0,0,0,0,0,0,1,0,1,1,0,0,0,0,0,1,1,0,1,0,0,0,1,1,0,0,1,0,1,0,0,1,1,1,1,1,0,1,1,0,1,0,0,0,1,1,0,1,0,1,1,0,0,1,0,0,0,1,1,1,1,1,1,0,0,1,1,0,0,0,1,1,1,1,0,0,0,1,1,0,0,0,1,0,1,1,1,0,0,0,1,0],\"creationTime\":\"2014-08-29 17:35:24 +08:00\",\"modificationTime\":\"2014-08-30 20:41:49 +08:00\",\"content\":\"<h2 id=\\\"this\\\">This</h2>\\n<h3 id=\\\"load-order\\\">load order</h3>\\n<ul>\\n<li><p>this.logger</p>\\n</li>\\n<li><p>this.config, this.storage</p>\\n</li>\\n<li><p>this.newFiles, this.changedFiles, this.unchangedFiles, this.removedFiles</p>\\n</li>\\n</ul>\\n<h3 id=\\\"this-logger\\\">this.logger</h3>\\n<pre><code>this.logger.trace(&#39;Entering cheese testing&#39;);\\nthis.logger.debug(&#39;Got cheese.&#39;);\\nthis.logger.info(&#39;Cheese is Gouda.&#39;);\\nthis.logger.warn(&#39;Cheese is quite smelly.&#39;);\\nthis.logger.error(&#39;Cheese is too ripe!&#39;);\\nthis.logger.fatal(&#39;Cheese was breeding ground for listeria.&#39;);\\n</code></pre><p>see also: <a href=\\\"https://github.com/nomiddlename/log4js-node\\\">https://github.com/nomiddlename/log4js-node</a></p>\\n<h3 id=\\\"this-storage\\\">this.storage</h3>\\n<pre><code class=\\\"lang-javascript\\\">var str = this.storage.getItem(&#39;key&#39;);\\nthis.storage.setItem(&#39;key2&#39;, &#39;STRING&#39;);\\n</code></pre>\\n<h3 id=\\\"this-cache\\\">this.cache</h3>\\n<pre><code class=\\\"lang-javascript\\\">var str = this.cache.getItem(&#39;key&#39;);\\nthis.cache.setItem(&#39;key2&#39;, &#39;STRING&#39;);\\n</code></pre>\\n<h3 id=\\\"this-newfiles\\\">this.newFiles</h3>\\n<pre><code class=\\\"lang-javascript\\\">[\\n    {\\n        path: &#39;path of file A&#39;,\\n        modificationTime: &#39;YYYY-MM-DD H:mm:ss Z&#39;,\\n        creationTime: &#39;YYYY-MM-DD H:mm:ss Z&#39;\\n    },\\n    {}\\n]\\n</code></pre>\\n<h3 id=\\\"this-changedfiles\\\">this.changedFiles</h3>\\n<pre><code class=\\\"lang-javascript\\\">[\\n    {\\n        path: &#39;path of file A&#39;,\\n        modificationTime: &#39;YYYY-MM-DD H:mm:ss Z&#39;,\\n        creationTime: &#39;YYYY-MM-DD H:mm:ss Z&#39;\\n    },\\n    {}\\n]\\n</code></pre>\\n<h3 id=\\\"this-unchangedfiles\\\">this.unchangedFiles</h3>\\n<pre><code class=\\\"lang-javascript\\\">[\\n    {\\n        path: &#39;path of file A&#39;,\\n        modificationTime: &#39;YYYY-MM-DD H:mm:ss Z&#39;,\\n        creationTime: &#39;YYYY-MM-DD H:mm:ss Z&#39;,\\n        content: &quot;html&quot;, // by kizz-markdown\\n        title: &quot;title&quot;, // by kizz-markdown\\n        tags: [&quot;tag1&quot;, &quot;tag2&quot;] // front yaml or kizz-guess-tags\\n    },\\n    {}\\n]\\n</code></pre>\\n<h3 id=\\\"this-removedfiles\\\">this.removedFiles</h3>\\n<pre><code class=\\\"lang-javascript\\\">[\\n    {\\n        path: &#39;path of file A&#39;,\\n        modificationTime: &#39;YYYY-MM-DD H:mm:ss Z&#39;,\\n        creationTime: &#39;YYYY-MM-DD H:mm:ss Z&#39;,\\n        content: &quot;html&quot;, // by kizz-markdown\\n        title: &quot;title&quot;, // by kizz-markdown\\n        tags: [&quot;tag1&quot;, &quot;tag2&quot;] // front yaml or kizz-guess-tags\\n    },\\n    {}\\n]\\n</code></pre>\\n\",\"title\":\"API\",\"tags\":[\"kizz\",\"api\"]},{\"path\":\"developer/middleware-guild.md\",\"absolutePath\":\"/home/zenozeng/home/code/kizz-doc/doc/developer/middleware-guild.md\",\"simhash\":[1,0,1,1,1,0,1,1,1,1,1,1,1,0,0,0,0,1,0,1,1,0,0,1,1,1,1,1,0,0,1,1,0,0,0,1,0,1,0,1,0,0,1,0,1,1,0,0,0,0,0,0,1,0,1,0,1,1,0,1,0,0,1,1,0,1,0,1,1,1,1,1,1,0,1,0,0,0,0,0,1,1,0,1,0,1,1,1,0,1,0,0,0,0,1,0,1,0,0,1,0,0,1,0,0,0,0,1,0,0,0,1,0,1,0,0,0,1,0,0,0,0,0,0,1,1,0,0],\"creationTime\":\"2014-08-29 17:35:24 +08:00\",\"modificationTime\":\"2014-08-30 20:41:49 +08:00\",\"content\":\"<h1 id=\\\"middleware-guide\\\">Middleware Guide</h1>\\n<h2 id=\\\"create-plugin\\\">create plugin</h2>\\n<pre><code>mkdir kizz-helloworld\\ncd kizz-helloworld\\n</code></pre><h3 id=\\\"create-package-json\\\">create package.json</h3>\\n<pre><code>npm init\\n</code></pre><h3 id=\\\"create-index-js\\\">create index.js</h3>\\n<pre><code>gedit index.js\\n</code></pre><pre><code class=\\\"lang-javascript\\\">module.exports = function(app) {\\n    app.when(function *() {\\n        return true;\\n    }).use(function *(next) {\\n        console.log(&quot;Hello World&quot;);\\n        yield next;\\n    });\\n}\\n</code></pre>\\n<h3 id=\\\"npm-link\\\">npm link</h3>\\n<pre><code>cd myblog\\nmkdir -p node_modules # create node_modules if not exists\\nsudo npm link ~/code/kizz-helloworld/\\n</code></pre><h3 id=\\\"update-config\\\">update config</h3>\\n<pre><code>plugins:\\n    - kizz-helloworld\\n</code></pre>\",\"title\":\"Middleware Guide\",\"tags\":[\"kizz\"]},{\"path\":\"developer/theme-guide.md\",\"absolutePath\":\"/home/zenozeng/home/code/kizz-doc/doc/developer/theme-guide.md\",\"simhash\":[1,0,1,0,0,0,0,0,0,0,0,0,1,0,0,1,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,0,0,0,0,1,1,1,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,1,0,0,0,1,0,0,1,0,0,0,0,0,0,1,0,0,0,1,1,0],\"creationTime\":\"2014-08-29 17:35:24 +08:00\",\"modificationTime\":\"2014-08-30 20:41:49 +08:00\",\"content\":\"<h1 id=\\\"kizz-theme-guide\\\">Kizz Theme Guide</h1>\\n<p>Themes are just middlewares.</p>\\n\",\"title\":\"Kizz Theme Guide\",\"tags\":[\"kizz\"]},{\"path\":\"images/logo.png\",\"absolutePath\":\"/home/zenozeng/home/code/kizz-doc/doc/images/logo.png\",\"simhash\":[1,1,1,0,1,0,0,0,0,0,1,1,1,0,0,1,1,0,0,0,0,1,1,0,1,1,1,1,1,0,1,1,1,1,0,1,1,1,1,1,1,0,0,1,0,1,1,0,1,0,0,0,1,1,0,0,1,1,1,0,1,0,0,1,0,0,1,1,1,1,0,0,0,1,0,0,1,1,0,0,1,1,1,0,1,1,0,0,1,1,1,0,0,1,1,1,1,1,0,1,1,1,1,1,1,0,0,1,0,1,0,0,1,1,0,1,1,1,0,1,1,0,0,1,1,0,1,0],\"creationTime\":\"2014-08-30 20:41:49 +08:00\",\"modificationTime\":\"2014-08-30 20:41:49 +08:00\"}]"}